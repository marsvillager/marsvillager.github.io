import{_ as l,o as n,c as t,z as s,a,O as e}from"./chunks/framework.aacc0fa0.js";const E=JSON.parse('{"title":"Background","description":"","frontmatter":{},"headers":[],"relativePath":"Floating Point.md"}'),m={name:"Floating Point.md"},i=s("h1",{id:"background",tabindex:"-1"},[a("Background "),s("a",{class:"header-anchor",href:"#background","aria-label":'Permalink to "Background"'},"​")],-1),r=s("p",null,"在深度学习硬件崛起之前，大多数的科学计算都是是基于 IEEE Float32 和 IEEE Float64 的。 随着深度学习的发展和 AI 处理器的演进，大家发现在 training 和 inference 的过程中，可以通过降低浮点运算的精度来有效的提升运行速度，功耗和芯片面积。那么，这给厂商提供了足够的自由度，来设计自己的浮点类型，从而取得 AI 系统性能和精度的平衡。",-1),o=s("p",null,"模型规模的持续扩大，导致模型训练和部署所需求的算力和功耗持续的扩张。面对算力的挑战，降低精度是一把利器，从最初的 FP32，到 16-bit 的 FP 的推出 （FP16和BF16），和一些定制的浮点类型的推出，如 TF32 等等。",-1),c=s("h1",{id:"浮点数",tabindex:"-1"},[a("浮点数 "),s("a",{class:"header-anchor",href:"#浮点数","aria-label":'Permalink to "浮点数"'},"​")],-1),p=s("p",null,"浮点数由三部分组成：符号位（sign）、指数部分（exponent）、尾数部分（mantissa）",-1),u=s("p",null,[s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",null,[s("semantics",null,[s("mrow",null,[s("mo",null,"("),s("mo",null,"−"),s("mn",null,"1"),s("msup",null,[s("mo",null,")"),s("mrow",null,[s("mi",null,"s"),s("mi",null,"i"),s("mi",null,"g"),s("mi",null,"n")])]),s("mo",null,"×"),s("msup",null,[s("mn",null,"2"),s("mrow",null,[s("mi",null,"e"),s("mi",null,"x"),s("mi",null,"p"),s("mi",null,"o"),s("mi",null,"n"),s("mi",null,"e"),s("mi",null,"n"),s("mi",null,"t"),s("mo",null,"−"),s("mi",null,"b"),s("mi",null,"i"),s("mi",null,"a"),s("mi",null,"s")])]),s("mo",null,"×"),s("mn",null,"1"),s("mi",{mathvariant:"normal"},"."),s("mi",null,"m"),s("mi",null,"a"),s("mi",null,"n"),s("mi",null,"t"),s("mi",null,"i"),s("mi",null,"s"),s("mi",null,"s"),s("mi",null,"a")]),s("annotation",{encoding:"application/x-tex"},"(-1)^{sign} \\times 2^{exponent - bias} \\times 1.mantissa")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"strut",style:{height:"0.849108em"}}),s("span",{class:"strut bottom",style:{height:"1.099108em","vertical-align":"-0.25em"}}),s("span",{class:"base textstyle uncramped"},[s("span",{class:"mopen"},"("),s("span",{class:"mord"},"−"),s("span",{class:"mord mathrm"},"1"),s("span",{class:"mclose"},[s("span",{class:"mclose"},")"),s("span",{class:"vlist"},[s("span",{style:{top:"-0.363em","margin-right":"0.05em"}},[s("span",{class:"fontsize-ensurer reset-size5 size5"},[s("span",{style:{"font-size":"0em"}},"​")]),s("span",{class:"reset-textstyle scriptstyle uncramped"},[s("span",{class:"mord scriptstyle uncramped"},[s("span",{class:"mord mathit"},"s"),s("span",{class:"mord mathit"},"i"),s("span",{class:"mord mathit",style:{"margin-right":"0.03588em"}},"g"),s("span",{class:"mord mathit"},"n")])])]),s("span",{class:"baseline-fix"},[s("span",{class:"fontsize-ensurer reset-size5 size5"},[s("span",{style:{"font-size":"0em"}},"​")]),a("​")])])]),s("span",{class:"mbin"},"×"),s("span",{class:"mord"},[s("span",{class:"mord mathrm"},"2"),s("span",{class:"vlist"},[s("span",{style:{top:"-0.363em","margin-right":"0.05em"}},[s("span",{class:"fontsize-ensurer reset-size5 size5"},[s("span",{style:{"font-size":"0em"}},"​")]),s("span",{class:"reset-textstyle scriptstyle uncramped"},[s("span",{class:"mord scriptstyle uncramped"},[s("span",{class:"mord mathit"},"e"),s("span",{class:"mord mathit"},"x"),s("span",{class:"mord mathit"},"p"),s("span",{class:"mord mathit"},"o"),s("span",{class:"mord mathit"},"n"),s("span",{class:"mord mathit"},"e"),s("span",{class:"mord mathit"},"n"),s("span",{class:"mord mathit"},"t"),s("span",{class:"mbin"},"−"),s("span",{class:"mord mathit"},"b"),s("span",{class:"mord mathit"},"i"),s("span",{class:"mord mathit"},"a"),s("span",{class:"mord mathit"},"s")])])]),s("span",{class:"baseline-fix"},[s("span",{class:"fontsize-ensurer reset-size5 size5"},[s("span",{style:{"font-size":"0em"}},"​")]),a("​")])])]),s("span",{class:"mbin"},"×"),s("span",{class:"mord mathrm"},"1"),s("span",{class:"mord mathrm"},"."),s("span",{class:"mord mathit"},"m"),s("span",{class:"mord mathit"},"a"),s("span",{class:"mord mathit"},"n"),s("span",{class:"mord mathit"},"t"),s("span",{class:"mord mathit"},"i"),s("span",{class:"mord mathit"},"s"),s("span",{class:"mord mathit"},"s"),s("span",{class:"mord mathit"},"a")])])])],-1),h=s("ul",null,[s("li",null,[s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",null,[s("semantics",null,[s("mrow",null,[s("mi",null,"b"),s("mi",null,"i"),s("mi",null,"a"),s("mi",null,"s")]),s("annotation",{encoding:"application/x-tex"},"bias")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"strut",style:{height:"0.69444em"}}),s("span",{class:"strut bottom",style:{height:"0.69444em","vertical-align":"0em"}}),s("span",{class:"base textstyle uncramped"},[s("span",{class:"mord mathit"},"b"),s("span",{class:"mord mathit"},"i"),s("span",{class:"mord mathit"},"a"),s("span",{class:"mord mathit"},"s")])])]),a(" 决定了数的取值范围，默认值为 127")]),s("li",null,"规定尾数部分最高位必须是 1，1 不保存就可以节省出 1 位用于提高精度，因此最高位的 1 是隐含的（Implied）")],-1),d=s("h2",{id:"_1-十进制整数-17-fp32",tabindex:"-1"},[a("（1）十进制整数 17 "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",null,[s("semantics",null,[s("mrow",null,[s("mo",null,"→")]),s("annotation",{encoding:"application/x-tex"},"\\rightarrow")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"strut",style:{height:"0.36687em"}}),s("span",{class:"strut bottom",style:{height:"0.36687em","vertical-align":"0em"}}),s("span",{class:"base textstyle uncramped"},[s("span",{class:"mrel"},"→")])])]),a(" Fp32 "),s("a",{class:"header-anchor",href:"#_1-十进制整数-17-fp32","aria-label":'Permalink to "（1）十进制整数 17 $\\rightarrow$ Fp32"'},"​")],-1),b=s("ul",null,[s("li",null,"sign = (0)2"),s("li",null,[a("exponent = (10000011)2 "),s("ul",null,[s("li",null,"exponent - bias = (128 + 2 + 1) - 127 = 4")])]),s("li",null,"mantissa = (00010000……)2")],-1),f=s("p",null,[s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",null,[s("semantics",null,[s("mrow",null,[s("mo",null,"("),s("mo",null,"−"),s("mn",null,"1"),s("msup",null,[s("mo",null,")"),s("mn",null,"0")]),s("mo",null,"×"),s("msup",null,[s("mn",null,"2"),s("mn",null,"4")]),s("mo",null,"×"),s("mo",null,"("),s("mn",null,"1"),s("mi",{mathvariant:"normal"},"."),s("mn",null,"0"),s("mn",null,"0"),s("mn",null,"0"),s("mn",null,"1"),s("mo",null,")"),s("mn",null,"2"),s("mo",null,"="),s("mo",null,"("),s("mn",null,"1"),s("mn",null,"0"),s("mn",null,"0"),s("mn",null,"0"),s("mn",null,"1"),s("mo",null,")"),s("mn",null,"2"),s("mo",null,"="),s("mn",null,"1"),s("mn",null,"7")]),s("annotation",{encoding:"application/x-tex"},"(-1)^0 \\times 2^4 \\times (1.0001)2 = (10001)2 = 17")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"strut",style:{height:"0.8141079999999999em"}}),s("span",{class:"strut bottom",style:{height:"1.064108em","vertical-align":"-0.25em"}}),s("span",{class:"base textstyle uncramped"},[s("span",{class:"mopen"},"("),s("span",{class:"mord"},"−"),s("span",{class:"mord mathrm"},"1"),s("span",{class:"mclose"},[s("span",{class:"mclose"},")"),s("span",{class:"vlist"},[s("span",{style:{top:"-0.363em","margin-right":"0.05em"}},[s("span",{class:"fontsize-ensurer reset-size5 size5"},[s("span",{style:{"font-size":"0em"}},"​")]),s("span",{class:"reset-textstyle scriptstyle uncramped"},[s("span",{class:"mord mathrm"},"0")])]),s("span",{class:"baseline-fix"},[s("span",{class:"fontsize-ensurer reset-size5 size5"},[s("span",{style:{"font-size":"0em"}},"​")]),a("​")])])]),s("span",{class:"mbin"},"×"),s("span",{class:"mord"},[s("span",{class:"mord mathrm"},"2"),s("span",{class:"vlist"},[s("span",{style:{top:"-0.363em","margin-right":"0.05em"}},[s("span",{class:"fontsize-ensurer reset-size5 size5"},[s("span",{style:{"font-size":"0em"}},"​")]),s("span",{class:"reset-textstyle scriptstyle uncramped"},[s("span",{class:"mord mathrm"},"4")])]),s("span",{class:"baseline-fix"},[s("span",{class:"fontsize-ensurer reset-size5 size5"},[s("span",{style:{"font-size":"0em"}},"​")]),a("​")])])]),s("span",{class:"mbin"},"×"),s("span",{class:"mopen"},"("),s("span",{class:"mord mathrm"},"1"),s("span",{class:"mord mathrm"},"."),s("span",{class:"mord mathrm"},"0"),s("span",{class:"mord mathrm"},"0"),s("span",{class:"mord mathrm"},"0"),s("span",{class:"mord mathrm"},"1"),s("span",{class:"mclose"},")"),s("span",{class:"mord mathrm"},"2"),s("span",{class:"mrel"},"="),s("span",{class:"mopen"},"("),s("span",{class:"mord mathrm"},"1"),s("span",{class:"mord mathrm"},"0"),s("span",{class:"mord mathrm"},"0"),s("span",{class:"mord mathrm"},"0"),s("span",{class:"mord mathrm"},"1"),s("span",{class:"mclose"},")"),s("span",{class:"mord mathrm"},"2"),s("span",{class:"mrel"},"="),s("span",{class:"mord mathrm"},"1"),s("span",{class:"mord mathrm"},"7")])])])],-1),g=s("h2",{id:"_2-十进制数-3-25-fp32",tabindex:"-1"},[a("（2）十进制数 3.25 "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",null,[s("semantics",null,[s("mrow",null,[s("mo",null,"→")]),s("annotation",{encoding:"application/x-tex"},"\\rightarrow")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"strut",style:{height:"0.36687em"}}),s("span",{class:"strut bottom",style:{height:"0.36687em","vertical-align":"0em"}}),s("span",{class:"base textstyle uncramped"},[s("span",{class:"mrel"},"→")])])]),a(" Fp32 "),s("a",{class:"header-anchor",href:"#_2-十进制数-3-25-fp32","aria-label":'Permalink to "（2）十进制数 3.25 $\\rightarrow$ Fp32"'},"​")],-1),x=s("ul",null,[s("li",null,"sign = (0)2"),s("li",null,[a("exponent = (10000000)2 "),s("ul",null,[s("li",null,"exponent - bias = 128 - 127 = 1")])]),s("li",null,"mantissa = (10100000……)2")],-1),F=s("p",null,[s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",null,[s("semantics",null,[s("mrow",null,[s("mo",null,"("),s("mo",null,"−"),s("mn",null,"1"),s("msup",null,[s("mo",null,")"),s("mn",null,"0")]),s("mo",null,"×"),s("msup",null,[s("mn",null,"2"),s("mn",null,"1")]),s("mo",null,"×"),s("mo",null,"("),s("mn",null,"1"),s("mi",{mathvariant:"normal"},"."),s("mn",null,"1"),s("mn",null,"0"),s("mn",null,"1"),s("mo",null,")"),s("mn",null,"2"),s("mo",null,"="),s("mo",null,"("),s("mn",null,"1"),s("mn",null,"1"),s("mi",{mathvariant:"normal"},"."),s("mn",null,"0"),s("mn",null,"1"),s("mo",null,")"),s("mn",null,"2"),s("mo",null,"="),s("mn",null,"3"),s("mi",{mathvariant:"normal"},"."),s("mn",null,"2"),s("mn",null,"5")]),s("annotation",{encoding:"application/x-tex"},"(-1)^0 \\times 2^1 \\times (1.101)2 = (11.01)2 = 3.25")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"strut",style:{height:"0.8141079999999999em"}}),s("span",{class:"strut bottom",style:{height:"1.064108em","vertical-align":"-0.25em"}}),s("span",{class:"base textstyle uncramped"},[s("span",{class:"mopen"},"("),s("span",{class:"mord"},"−"),s("span",{class:"mord mathrm"},"1"),s("span",{class:"mclose"},[s("span",{class:"mclose"},")"),s("span",{class:"vlist"},[s("span",{style:{top:"-0.363em","margin-right":"0.05em"}},[s("span",{class:"fontsize-ensurer reset-size5 size5"},[s("span",{style:{"font-size":"0em"}},"​")]),s("span",{class:"reset-textstyle scriptstyle uncramped"},[s("span",{class:"mord mathrm"},"0")])]),s("span",{class:"baseline-fix"},[s("span",{class:"fontsize-ensurer reset-size5 size5"},[s("span",{style:{"font-size":"0em"}},"​")]),a("​")])])]),s("span",{class:"mbin"},"×"),s("span",{class:"mord"},[s("span",{class:"mord mathrm"},"2"),s("span",{class:"vlist"},[s("span",{style:{top:"-0.363em","margin-right":"0.05em"}},[s("span",{class:"fontsize-ensurer reset-size5 size5"},[s("span",{style:{"font-size":"0em"}},"​")]),s("span",{class:"reset-textstyle scriptstyle uncramped"},[s("span",{class:"mord mathrm"},"1")])]),s("span",{class:"baseline-fix"},[s("span",{class:"fontsize-ensurer reset-size5 size5"},[s("span",{style:{"font-size":"0em"}},"​")]),a("​")])])]),s("span",{class:"mbin"},"×"),s("span",{class:"mopen"},"("),s("span",{class:"mord mathrm"},"1"),s("span",{class:"mord mathrm"},"."),s("span",{class:"mord mathrm"},"1"),s("span",{class:"mord mathrm"},"0"),s("span",{class:"mord mathrm"},"1"),s("span",{class:"mclose"},")"),s("span",{class:"mord mathrm"},"2"),s("span",{class:"mrel"},"="),s("span",{class:"mopen"},"("),s("span",{class:"mord mathrm"},"1"),s("span",{class:"mord mathrm"},"1"),s("span",{class:"mord mathrm"},"."),s("span",{class:"mord mathrm"},"0"),s("span",{class:"mord mathrm"},"1"),s("span",{class:"mclose"},")"),s("span",{class:"mord mathrm"},"2"),s("span",{class:"mrel"},"="),s("span",{class:"mord mathrm"},"3"),s("span",{class:"mord mathrm"},"."),s("span",{class:"mord mathrm"},"2"),s("span",{class:"mord mathrm"},"5")])])])],-1),_=e("",24),z=[i,r,o,c,p,u,h,d,b,f,g,x,F,_];function y(P,k,v,B,w,q){return n(),t("div",null,z)}const N=l(m,[["render",y]]);export{E as __pageData,N as default};
